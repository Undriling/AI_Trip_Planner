import { GoogleGenerativeAI } from "@google/generative-ai";

  const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate travel plan for Location: Las Vegas, for 3 days for Couple with a Cheap budget. Give me a Hotels options List with Hotel Name, Hotel Address, Prices, Hotel Image url, geo coordinates, ratings , descriptions and suggest itinary with Place Name  , place details, place image url , geo coordinates , ticket pricing , rating , Time to travel each of the location for 3 days with each day plan with best time to visit in JSON format .\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a JSON-formatted travel plan for a 3-day Las Vegas trip for a couple on a budget, incorporating hotel options, an itinerary, and the requested details.  I've focused on free or inexpensive activities and dining options.  Remember that prices can fluctuate.  I've used placeholder image URLs (replace these with actual images).  I've also assumed that you are comfortable using ride-sharing or public transport.\n\n```json\n{\n  \"tripName\": \"Las Vegas Budget Getaway (3 Days)\",\n  \"travelers\": \"Couple\",\n  \"budget\": \"Cheap\",\n  \"dates\": \"Example: 2024-11-17 to 2024-11-19\",\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"pricePerNight\": 40,\n      \"hotelImageURL\": \"https://example.com/circus_circus_image.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1280,\n        \"longitude\": -115.1656\n      },\n      \"rating\": 3.5,\n      \"description\": \"Budget-friendly option on the Strip, known for its circus acts and Adventuredome indoor theme park (extra cost). Offers basic accommodations.\",\n      \"nearbyAttractions\": [\"The STRAT Hotel, Casino & SkyPod\", \"Fashion Show Mall\"]\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"pricePerNight\": 50,\n      \"hotelImageURL\": \"https://example.com/excalibur_image.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0944,\n        \"longitude\": -115.1742\n      },\n      \"rating\": 4.0,\n      \"description\": \"Medieval-themed hotel with affordable rates, a pool, and various dining options. Good location on the south end of the Strip.\",\n      \"nearbyAttractions\": [\"Luxor Hotel & Casino\", \"MGM Grand Garden Arena\"]\n    },\n    {\n      \"hotelName\": \"Strat Hotel, Casino & Skypod\",\n      \"hotelAddress\": \"2000 Las Vegas Blvd S, Las Vegas, NV 89104\",\n      \"pricePerNight\": 45,\n      \"hotelImageURL\": \"https://example.com/strat_image.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1465,\n        \"longitude\": -115.1557\n      },\n      \"rating\": 3.8,\n      \"description\": \"Located further north on the Strip, offering great views from the Skypod (extra cost), thrill rides, and affordable rooms.\",\n       \"nearbyAttractions\": [\"Circus Circus Hotel & Casino\", \"Downtown Las Vegas\"]\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip (South End)\",\n      \"bestTimeToVisit\": \"Afternoon and Evening\",\n      \"plan\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign for a photo opportunity. Free. Expect a line.\",\n          \"placeImageURL\": \"https://example.com/welcome_sign_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0829,\n            \"longitude\": -115.1741\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.5,\n          \"timeToTravelFromHotel\": \"15-20 minutes (ride-sharing/bus from Excalibur)\"\n        },\n        {\n          \"placeName\": \"Luxor Hotel & Casino\",\n          \"placeDetails\": \"Visit the impressive pyramid architecture and light beam.\",\n          \"placeImageURL\": \"https://example.com/luxor_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0956,\n            \"longitude\": -115.1759\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.0,\n          \"timeToTravelFromPreviousLocation\": \"5 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Beautiful seasonal displays. Free. Inside the Bellagio Hotel.\",\n          \"placeImageURL\": \"https://example.com/bellagio_gardens_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1126,\n            \"longitude\": -115.1762\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.8,\n          \"timeToTravelFromPreviousLocation\": \"20 minutes (ride-sharing/bus)\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Spectacular water show set to music. Free. In front of the Bellagio.\",\n          \"placeImageURL\": \"https://example.com/bellagio_fountains_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1762\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.9,\n          \"timeToTravelFromPreviousLocation\": \"0 minutes (adjacent to gardens)\"\n        },\n        {\n          \"placeName\": \"Dinner at In-N-Out Burger (Near Linq Promenade)\",\n          \"placeDetails\": \"Classic and affordable burger joint.\",\n          \"placeImageURL\": \"https://example.com/in_n_out_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1162,\n            \"longitude\": -115.1707\n          },\n          \"ticketPricing\": \"~$10 per person\",\n          \"rating\": 4.6,\n          \"timeToTravelFromPreviousLocation\": \"10 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel (Optional - Happy Hour)\",\n          \"placeDetails\": \"Consider happy hour for discounted drinks and amazing views. Can be pricey otherwise.\",\n          \"placeImageURL\": \"https://example.com/high_roller_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1154,\n            \"longitude\": -115.1695\n          },\n          \"ticketPricing\": \"~$37+ per person\",\n          \"rating\": 4.4,\n          \"timeToTravelFromPreviousLocation\": \"2 minutes (walking)\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown & Fremont Street Experience\",\n      \"bestTimeToVisit\": \"Evening (for the light show)\",\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Light and sound show on a canopy screen. Free. Street performers and casinos.\",\n          \"placeImageURL\": \"https://example.com/fremont_street_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n            \"longitude\": -115.1427\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.6,\n          \"timeToTravelFromHotel\": \"30-40 minutes (ride-sharing/bus from Strip)\"\n        },\n        {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"Unique shopping and dining area made from shipping containers. Free to enter.\",\n          \"placeImageURL\": \"https://example.com/container_park_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1684,\n            \"longitude\": -115.1408\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.3,\n          \"timeToTravelFromPreviousLocation\": \"5 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"Heart Attack Grill\",\n          \"placeDetails\": \"Over-the-top, controversial burger restaurant. A novelty experience (if you dare).\",\n          \"placeImageURL\": \"https://example.com/heart_attack_grill_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1433\n          },\n          \"ticketPricing\": \"$15-25 per person\",\n          \"rating\": 3.5,\n          \"timeToTravelFromPreviousLocation\": \"2 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"Explore Downtown Casinos (Golden Nugget, Four Queens)\",\n          \"placeDetails\": \"Check out the older, more classic casinos downtown. Lower minimum bets often available.\",\n          \"placeImageURL\": \"https://example.com/golden_nugget_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1695,\n            \"longitude\": -115.1445\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.2,\n          \"timeToTravelFromPreviousLocation\": \"Walking distance\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Exploring the Strip (North End) & Departure\",\n      \"bestTimeToVisit\": \"Morning and Afternoon\",\n      \"plan\": [\n        {\n          \"placeName\": \"The Venetian & The Palazzo\",\n          \"placeDetails\": \"Explore the canals, shops, and architecture. Gondola rides are extra.\",\n          \"placeImageURL\": \"https://example.com/venetian_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1216,\n            \"longitude\": -115.1754\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.7,\n          \"timeToTravelFromHotel\": \"20 minutes (ride-sharing/bus from Strip South end Hotels)\"\n        },\n        {\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"Outdoor shopping, dining, and entertainment area.  Photo ops.\",\n          \"placeImageURL\": \"https://example.com/linq_promenade_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1163,\n            \"longitude\": -115.1707\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.5,\n          \"timeToTravelFromPreviousLocation\": \"10 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"Caesars Palace Forum Shops\",\n          \"placeDetails\": \"Upscale shopping mall with impressive Roman architecture.  Window shopping.\",\n          \"placeImageURL\": \"https://example.com/caesars_forum_shops_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1175,\n            \"longitude\": -115.1743\n          },\n          \"ticketPricing\": 0,\n          \"rating\": 4.6,\n          \"timeToTravelFromPreviousLocation\": \"5 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"Marvel Avengers S.T.A.T.I.O.N.\",\n          \"placeDetails\": \"Marvel Avengers S.T.A.T.I.O.N.is an interactive attraction that brings you into the world of The Avengers\",\n          \"placeImageURL\": \"https://www.marvelavengersstation.com/wp-content/uploads/2022/09/mavl-banner-desktop-01.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1175,\n            \"longitude\": -115.1743\n          },\n          \"ticketPricing\": 34,\n          \"rating\": 4.6,\n          \"timeToTravelFromPreviousLocation\": \"3 minutes (walking)\"\n        },\n        {\n          \"placeName\": \"Departure from Las Vegas\",\n          \"placeDetails\": \"Head to the airport (LAS) for your flight home.\",\n          \"placeImageURL\": \"https://example.com/airport_image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0801,\n            \"longitude\": -115.1523\n          },\n          \"ticketPricing\": \"Transportation to airport cost\",\n          \"rating\": null,\n          \"timeToTravelFromPreviousLocation\": \"20-30 minutes (ride-sharing/bus from the Strip)\"\n        }\n      ]\n    }\n  },\n  \"budgetTips\": [\n    \"Take advantage of free activities like the fountains, gardens, and street performers.\",\n    \"Utilize public transportation or ride-sharing to save on taxi fares.\",\n    \"Look for happy hour specials for discounted drinks and appetizers.\",\n    \"Eat at affordable restaurants or food courts.\",\n    \"Bring your own water and snacks to avoid expensive convenience store purchases.\",\n    \"Check for free events and promotions during your travel dates.\"\n  ]\n}\n```\n\n**Important Notes and Considerations:**\n\n*   **Image URLs:**  Replace the placeholder image URLs with actual links to images.\n*   **Prices:** Hotel prices, ticket prices, and food costs are estimates.  Check current prices before booking. Prices are volatile.\n*   **Transportation:** This plan assumes you'll use ride-sharing (Uber/Lyft) or the Las Vegas public transportation system (bus).  These are more cost-effective than taxis.\n*   **Walking:**  Be prepared to do a lot of walking. Wear comfortable shoes.\n*   **Flexibility:** This is a suggested itinerary. Feel free to adjust it based on your interests and energy levels.\n*   **Reservations:**  While many things are free to see, making reservations for shows or tours in advance is highly recommended, especially during peak season.\n*   **Gambling:** This plan does not include a significant gambling budget.  If you plan to gamble, set a strict limit and stick to it.\n*   **Hydration:**  Las Vegas is in the desert. Drink plenty of water.\n*   **Time of Year:** Consider the time of year you're traveling. Summer can be extremely hot, while winter can be chilly.\n\nRemember to double-check all information and make reservations where needed before your trip. Enjoy your budget-friendly Las Vegas adventure!\n"},
          ],
        },
      ],
    });
  
